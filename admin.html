

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Result Arena â€” Admin Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Space+Grotesk:wght@500&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    *{box-sizing:border-box;scroll-behavior:smooth;}
    body{margin:0;font-family:'Poppins',sans-serif;background:#fff;color:#000;}
    h1,h2,h3{font-family:'Space Grotesk',sans-serif;margin:0;color:navy;}
    .navbar{position:fixed;top:0;width:100%;background:#fff;display:flex;justify-content:space-between;align-items:center;padding:12px 8%;z-index:1000;border-bottom:1px solid #ccc;}
    .logo{font-size:1.4rem;font-weight:700;letter-spacing:1px;color:navy;}
    .hamburger{display:flex;flex-direction:column;gap:5px;cursor:pointer;}
    .hamburger div{width:26px;height:3px;background:navy;transition:.3s;}
    .hamburger.active div:nth-child(1){transform:rotate(45deg) translate(5px,5px);}
    .hamburger.active div:nth-child(2){opacity:0;}
    .hamburger.active div:nth-child(3){transform:rotate(-45deg) translate(5px,-5px);}
    .nav-links{position:fixed;top:60px;right:-220px;width:200px;height:calc(100% - 60px);background:#fff;display:flex;flex-direction:column;gap:10px;padding-top:20px;border-left:1px solid #ddd;transition:.3s;}
    .nav-links.active{right:0;}
    .nav-links button{background:none;border:none;width:100%;padding:12px 0;font-size:1rem;color:navy;font-weight:500;border-bottom:1px solid #eee;cursor:pointer;}
    .section{padding:100px 8% 50px;margin-top:20px;display:none;}
    .section.active{display:block;}
    .form-card{background:#fff;padding:25px;border-radius:10px;border:1px solid #ddd;max-width:900px;margin:auto;}
    .row{display:flex;gap:20px;margin-bottom:15px;}
    .row label{flex:1;font-weight:600;color:#333;}
    input,select{width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-top:5px;}
    button.save-btn{background:navy;color:#fff;padding:12px 25px;border:none;border-radius:8px;cursor:pointer;margin-top:10px;}
    @media(max-width:700px){.row{flex-direction:column;}.nav-links{width:180px;}}
  </style>
</head>
<body><!-- NAVBAR --><nav class="navbar">
  <div class="logo">Result Arena</div>
  <div class="hamburger" id="hamburger"><div></div><div></div><div></div></div>
  <div class="nav-links" id="navLinks">
    <button onclick="showSection('register')">Register Student</button>
    <button onclick="showSection('results')">Add Result</button>
    <button onclick="showSection('manage')">Manage Students</button>
    <button onclick="showSection('addTeacher')">Add Teacher</button>
    <button onclick="showSection('manageTeacher')">Manage Teachers</button>
    <button onclick="showSection('transfer')">Transfer Students</button>
  </div>
</nav><!-- REGISTER STUDENT --><section id="register" class="section active">
  <h1>Register Student</h1>
  <div class="form-card">
    <form id="registrationForm">
      <div class="row">
        <label>Full Name <input type="text" name="fullName" required></label>
        <label>Student ID <input type="text" name="studentId" required></label>
      </div>
      <div class="row">
        <label>Date of Birth <input type="date" name="dateOfBirth" required></label>
        <label>Nationality <input type="text" name="nationality"></label>
      </div>
      <div class="row">
        <label>Parent's Name <input type="text" name="parentName"></label>
        <label>Parent Phone <input type="tel" name="parentPhone"></label>
      </div>
      <div class="row">
        <label>Guardian Name <input type="text" name="guardianName"></label>
        <label>Guardian Phone <input type="tel" name="guardianPhone"></label>
      </div>
      <div class="row">
        <label>LGA <input type="text" name="lga"></label>
      </div>
      <button class="save-btn" type="submit">Register Student</button>
      <div id="status"></div>
    </form>
  </div>
</section><!-- ADD RESULT --><section id="results" class="section">
  <h1>Add Result</h1>
  <div class="form-card">
    <form id="resultForm">
      <div class="row">
        <label>Student ID <input type="text" name="studentId" required></label>
        <label>Subject <input type="text" name="subject" required></label>
      </div>
      <div class="row">
        <label>Score <input type="number" name="score" required></label>
        <label>Term
          <select name="term">
            <option>First Term</option>
            <option>Second Term</option>
            <option>Third Term</option>
          </select>
        </label>
      </div>
      <div class="row">
        <label>Session <input type="text" name="session" placeholder="2024/2025"></label>
      </div>
      <button class="save-btn">Save Result</button>
    </form>
  </div>
</section><!-- MANAGE STUDENTS --><section id="manage" class="section">
  <h1>Manage Students</h1>
  <div class="form-card">
    <label style="font-weight:600; margin-bottom:10px; display:block;">Filter by Class</label>
    <select id="classFilter" onchange="filterByClass()" style="padding:10px; width:100%; max-width:250px; border:1px solid #ccc; border-radius:6px; margin-bottom:20px;">
      <option value="all">All Classes</option>
      <option>Pre-KG</option>
      <option>KG 1</option>
      <option>KG 2</option>
      <option>Primary 1</option>
      <option>Primary 2</option>
      <option>Primary 3</option>
      <option>Primary 4</option>
      <option>Primary 5</option>
    </select>
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="background:navy; color:white;">
          <th style="padding:10px; border:1px solid #ddd;">Student ID</th>
          <th style="padding:10px; border:1px solid #ddd;">Name</th>
          <th style="padding:10px; border:1px solid #ddd;">Class</th>
        </tr>
      </thead>
      <tbody id="studentsBody"></tbody>
    </table>
  </div>
</section><!-- ADD TEACHER --><section id="addTeacher" class="section">
  <h1>Add Teacher</h1>
  <div class="form-card">
    <form id="teacherForm">
      <div class="row">
        <label>Full Name <input type="text" name="teacherName" required></label>
        <label>Teacher ID <input type="text" name="teacherId" required></label>
      </div>
      <div class="row">
        <label>Class(es) <input type="text" name="classes" placeholder="E.g. KG 1, Primary 2" required></label>
      </div>
      <button class="save-btn" type="submit">Add Teacher</button>
    </form>
  </div>
</section><!-- MANAGE TEACHERS --><section id="manageTeacher" class="section">
  <h1>Manage Teachers</h1>
  <div class="form-card">
    <table style="width:100%; border-collapse: collapse;">
      <thead>
        <tr style="background:navy;color:white;">
          <th style="padding:10px;border:1px solid #ddd;">Teacher ID</th>
          <th style="padding:10px;border:1px solid #ddd;">Name</th>
          <th style="padding:10px;border:1px solid #ddd;">Class(es)</th>
        </tr>
      </thead>
      <tbody id="teachersBody"></tbody>
    </table>
  </div>
</section><!-- TRANSFER STUDENTS --><section id="transfer" class="section">
  <h1>Transfer Students</h1>
  <div class="form-card">
    <form id="transferForm">
      <div class="row">
        <label>Current Class
          <select id="currentClass" required>
            <option value="">--Select Current Class--</option>
            <option>Pre-KG</option>
            <option>KG 1</option>
            <option>KG 2</option>
            <option>Primary 1</option>
            <option>Primary 2</option>
            <option>Primary 3</option>
            <option>Primary 4</option>
            <option>Primary 5</option>
          </select>
        </label>
        <label>New Class
          <select id="newClass" required>
            <option value="">--Select New Class--</option>
            <option>Pre-KG</option>
            <option>KG 1</option>
            <option>KG 2</option>
            <option>Primary 1</option>
            <option>Primary 2</option>
            <option>Primary 3</option>
            <option>Primary 4</option>
            <option>Primary 5</option>
          </select>
        </label>
      </div>
      <button class="save-btn" type="submit">Transfer</button>
    </form>
  </div>
</section>
<script>
const hamburger=document.getElementById('hamburger');
const navLinks=document.getElementById('navLinks');
hamburger.addEventListener('click',()=>{hamburger.classList.toggle('active');navLinks.classList.toggle('active');});

function showSection(id){document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');navLinks.classList.remove('active');hamburger.classList.remove('active');}

const API_URL="https://bps-qgmn.onrender.com";
let allStudents=[], allTeachers=[];

async function fetchStudents(){try{const res=await fetch(`${API_URL}/api/students`);const data=await res.json();allStudents=data; renderStudents(data);}catch(err){console.error(err);}}
function renderStudents(list){let tbody=document.getElementById('studentsBody'); tbody.innerHTML='';list.forEach(std=>{tbody.innerHTML+=`<tr><td style='padding:10px;border:1px solid #ddd;'>${std.studentId}</td><td style='padding:10px;border:1px solid #ddd;'>${std.studentName}</td><td style='padding:10px;border:1px solid #ddd;'>${std.studentClass||'-'}</td></tr>`;});}
function filterByClass(){const selected=document.getElementById('classFilter').value;if(selected==='all') return renderStudents(allStudents);renderStudents(allStudents.filter(std=>(std.studentClass||'').toLowerCase()===selected.toLowerCase()));}

async function transferStudents(e){e.preventDefault();const currentClass=document.getElementById('currentClass').value;const newClass=document.getElementById('newClass').value;if(!currentClass||!newClass)return alert('Select both classes.');try{const res=await fetch(`${API_URL}/api/students/transfer-class`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({currentClass,newClass})});const result=await res.json();if(result.success){alert('All students transferred successfully!');fetchStudents();document.getElementById('transferForm').reset();}else alert('Error: '+(result.error||'Unknown'));}catch(err){console.error(err);alert('Failed to connect to server.');}
}
document.getElementById('transferForm').addEventListener('submit',transferStudents);

// Teacher form
 document.getElementById('teacherForm').addEventListener('submit',async e=>{e.preventDefault();const data={teacherName:e.target.teacherName.value,teacherId:e.target.teacherId.value,classes:e.target.classes.value};try{const res=await fetch(`${API_URL}/api/teachers`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});const result=await res.json();if(result.success){alert('Teacher added successfully!'); e.target.reset(); fetchTeachers();}else alert('Error: '+(result.error||'Unknown'));}catch(err){console.error(err); alert('Failed to connect to server.');}});

async function fetchTeachers(){try{const res=await fetch(`${API_URL}/api/teachers`);const data=await res.json(); allTeachers=data; renderTeachers(data);}catch(err){console.error(err);}}
function renderTeachers(list){let tbody=document.getElementById('teachersBody'); tbody.innerHTML='';list.forEach(t=>{tbody.innerHTML+=`<tr><td style='padding:10px;border:1px solid #ddd;'>${t.teacherId}</td><td style='padding:10px;border:1px solid #ddd;'>${t.teacherName}</td><td style='padding:10px;border:1px solid #ddd;'>${t.classes}</td></tr>`;});}

fetchStudents(); fetchTeachers();
</script>
</body>
</html>